<p>AWS를 하면서도 많이 볼 수 있는 라우터, 로드밸런서와 같이 네트워크 기기와 같은 개념들도 알아보자.</p>
<h1 id="네트워크-기기">네트워크 기기</h1>
<h2 id="네트워크-기기의-처리-범위">네트워크 기기의 처리 범위</h2>
<ul>
<li>애플리케이션 계층 : L7 스위치</li>
<li>인터넷 계층 : 라우터, L3 스위치</li>
<li>데이터 링크 계층 : L2 스위치, 브릿지</li>
<li>물리 계층 : NIC, 리피터, AP</li>
</ul>
<p>애플리케이션 계층을 처리하는 기기부터 보자.</p>
<hr />
<h2 id="애플리케이션-계층-처리-기기">애플리케이션 계층 처리 기기</h2>
<h3 id="l7-스위치">L7 스위치</h3>
<blockquote>
<p>스위치 : 여러 장비를 연결하고 데이터 통신을 중재하며 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비</p>
</blockquote>
<p>L7 스위치는 <strong>로드밸런서</strong> 라고도 한다. 서버의 부하를 분산하는 기기로, 클라이언트로부터 오는 요청들을 분산시켜 여러 서버로 보내는 역할을 한다.</p>
<p><strong>목표</strong> : 시스템이 처리할 수 있는 트래픽 증가</p>
<ul>
<li>URL, 서버, 캐시, 쿠키들을 기반으로 트래픽을 분산한다.</li>
<li>바이러스나 불필요한 외부 데이터 등을 걸러내는 필터링 기능도 한다.</li>
<li>응용 프로그램 수준의 트래픽 모니터링도 가능</li>
</ul>
<p>장애가 발생한 서버가 있는 경우에는 트래픽 분산 대상에서 제외해야 하는데, <strong>정기적인 헬스 체크 (Health Check)를 이용</strong>해 감시하면서 이뤄진다.</p>
<blockquote>
<p>L4 스위치와 L7 스위치의 차이
로드밸런서로는 위 2가지가 있는데, L4 스위치는 전송 계층을 처리하는 기기로 스트리밍 관련 서비스에서는 사용할 수 없다. 그리고 메시지 기반이 아닌 IP와 포트를 기반으로 (주로 포트 기반) 트래픽을 분산한다.
L7 스위치는 IP, 포트 외 URL, HTTP, 헤더, 쿠키 등을 기반으로 트래픽을 분산한다.</p>
</blockquote>
<p>처음에 말했던 것처럼 AWS와 같은 클라우드 서비스에서는 L7 스위치를 이용한 로드밸런싱은 ALB (Application Load Balancer) 컴포넌트</p>
<p>L4 스위치를 이용한 로드밸런싱은 NLB (Network Load Balancer) 컴포넌트</p>
<p>트래픽 분산이기 때문에 로드밸런서를 운용하기 위해서는 2대 이상의 서버가 필수적이다.
에러가 발생해 서버 1대가 다운돼도 서비스는 안정적으로 운용돼야 하기 때문이다.</p>
<hr />
<h2 id="인터넷-계층을-처리하는-기기">인터넷 계층을 처리하는 기기</h2>
<h3 id="라우터">라우터</h3>
<p>라우터는 여러 개의 네트워크를 연결, 분할, 구분하는 역할이다.</p>
<p>다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고 받을 때 패킷 소모를 최소화, 경로를 최적화 해서 최소 경로로 패킷을 Forwarding 하는 라우팅을 하는 장비이다.</p>
<hr />
<h3 id="l3-스위치">L3 스위치</h3>
<p>L2 스위치의 기능과 라우팅 기능을 갖춘 장비를 말하는데, 데이터 링크 계층 기기를 설명할 때 L2 스위치 기능을 작성하겠다.</p>
<p>L3 스위치는 라우터라고 해도 무방하다.</p>
<p>라우터는 소프트웨어 기반의 라우팅하는 것과 하드웨어 기반의 라우팅하는 것으로 나눠진다면,</p>
<p>하드웨어 기반의 라우팅을 하는 것이 L3 스위치 담당이다.</p>
<hr />
<h2 id="데이터-링크-계층을-처리하는-기기">데이터 링크 계층을 처리하는 기기</h2>
<h3 id="l2-스위치">L2 스위치</h3>
<p>장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리하며, 연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당한다.</p>
<p>IP 주소는 이해 불가능하기 때문에 IP 주소 기반 라우팅은 불가능하다.</p>
<p>패킷의 MAC 주소를 읽어 스위칭하는 역할만 한다.</p>
<blockquote>
<p>만약에 MAC 주소 테이블이 없다면 -&gt; 전체 포트에 전달 후 MAC 주소 테이블의 주소는 일정 시간 이후 삭제하는 기능도 있다.</p>
</blockquote>
<hr />
<h3 id="브릿지-bridge">브릿지 (Bridge)</h3>
<p>2개의 근거리 통신망인 LAN을 상호 접속할 수 있도록 하는 통신망 연결 장치</p>
<p>포트와 포트 사이의 다리 역할을 하고, 장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리한다.</p>
<hr />
<h2 id="물리-계층을-처리하는-기기">물리 계층을 처리하는 기기</h2>
<h3 id="nic">NIC</h3>
<blockquote>
<p>LAN 카드라고 하는 NIC (네트워크 인터페이스 카드) 는 2대 이상의 컴퓨터 네트워크를 구성하는 데 사용한다.</p>
</blockquote>
<p>네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터 내에 설치하는 확장 카드다.</p>
<p>각각 LAN 카드에는 주민등록번호와 같은 고유의 식별번호인 MAC 주소가 있다.</p>
<hr />
<h3 id="리피터-repeater">리피터 (repeater)</h3>
<blockquote>
<p>들어오는 약해진 신호 정도를 증폭해 다른 쪽으로 전달하는 장치를 말한다.</p>
</blockquote>
<p>신호를 증폭하기에 패킷이 더 멀리 갈 수 있다.</p>
<blockquote>
<p>광케이블이 보급되면서는 잘 쓰이지 않는 장치다.</p>
</blockquote>
<hr />
<h3 id="ap-access-point">AP (Access Point)</h3>
<p>패킷을 복사하는 기기로 유선 LAN을 연결한 후 다른 장치에서 무선 LAN 기술 (와이파이) 을 사용해 무선 네트워크 연결을 할 수 있다.</p>